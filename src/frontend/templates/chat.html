html
<!DOCTYPE html>
<html>
<head>
    <title>WebSocket Chat Test</title>
    <style>
        /* Your existing styles */
    </style>
</head>
<body>
    <h1>WebSocket Chat Test</h1>
    <div id="status">Disconnected</div>
    <div id="chat"></div>
    <div>
        <input type="text" id="message" placeholder="Type your message...">
        <button onclick="sendMessage()">Send</button>
    </div>

    <script>
        // Get the correct server URL
        const serverUrl = "http://localhost:8000";  // Must match your FastAPI server
        const roomId = "test-room";
        
        // Construct WebSocket URL
        const wsUrl = serverUrl.replace('http', 'ws') + `/ws/trash/${roomId}`;
        console.log("Connecting to:", wsUrl);
        console.log("Server url:", serverUrl);
        
        const chatDiv = document.getElementById('chat');
        const statusDiv = document.getElementById('status');
        const messageInput = document.getElementById('message');
        
        const ws = new WebSocket(wsUrl);

        ws.onopen = (event) => {
            statusDiv.textContent = `Connected to ${roomId}`;
            statusDiv.style.color = "green";
            addMessage("System", "Connected!");
        };

        ws.onmessage = (event) => {
            addMessage("Server", event.data);
        };

        ws.onclose = (event) => {
            statusDiv.textContent = "Disconnected";
            statusDiv.style.color = "red";
            addMessage("System", "Disconnected!");
        };

        ws.onerror = (error) => {
            console.error("WebSocket error:", error);
            statusDiv.textContent = "Connection error!";
            statusDiv.style.color = "darkred";
        };

        function addMessage(sender, message) {
            const msgElement = document.createElement('div');
            msgElement.innerHTML = `<strong>[${new Date().toLocaleString()}] ${sender}:</strong> ${message}`;
            chatDiv.appendChild(msgElement);
            chatDiv.scrollTop = chatDiv.scrollHeight;
        }

        function sendMessage() {
            const message = messageInput.value.trim();
            if (message && ws.readyState === WebSocket.OPEN) {
                ws.send(message);
                addMessage("You", message);
                messageInput.value = '';
            }
        }

        messageInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendMessage();
        });
    </script>
</body>
</html>